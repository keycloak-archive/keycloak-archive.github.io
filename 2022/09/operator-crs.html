
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>The future of Keycloak Operator CRs - Keycloak</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Keycloak is an open source identity and access management solution">
    <meta name="author" content="Keycloak Team">
    <meta name="keywords" content="sso,idm,openid connect,saml,kerberos,ldap">

    

    

    <link href="/resources/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/resources/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="/resources/css/keycloak.css" rel="stylesheet">

    <link rel="shortcut icon" href="/resources/favicon.ico">

    <script src="/resources/js/ga.js" type="text/javascript"></script>
    <script src="/resources/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/resources/tocbot/dist/tocbot.min.js" type="text/javascript"></script>
</head>
<body>

<header class="navbar navbar-expand-md bg-light shadow-sm">
<nav class="container-xxl flex-wrap flex-md-no-wrap navbar-light">
    <a class="navbar-brand me-5" href="/">
        <img class="img-fluid" src="/resources/images/keycloak_logo_200px.svg" width="240" alt="Keycloak"/>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="fa fa-bars fa-lg px-1 py-2"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0">
        <li class="nav-item col-6 col-md-auto">
          <a class="nav-link " href="/guides">Guides</a>
        </li>
        <li class="nav-item col-6 col-md-auto">
          <a class="nav-link " href="/documentation">Docs</a>
        </li>
        <li class="nav-item col-6 col-md-auto">
          <a class="nav-link " href="/downloads">Downloads</a>
        </li>
        <li class="nav-item col-6 col-md-auto">
          <a class="nav-link " href="/community">Community</a>
        </li>
        <li class="nav-item col-6 col-md-auto">
          <a class="nav-link " href="/blog">Blog</a>
        </li>
      </ul>
    </div>
</nav>
</header>


<div class="container mt-5 kc-article">
    <h1>The future of Keycloak Operator CRs</h1>
    <p class="blog-date text-muted">September 02 2022 by Václav Muzikář</p>


<div class="paragraph">
<p>A while back, we have <a href="https://www.keycloak.org/2021/10/keycloak-x-update.html#_operator_and_containers">announced</a> a new
Operator rewritten from scratch to provide the best experience for the Quarkus distribution. While the
<a href="https://github.com/keycloak/keycloak-operator">legacy Operator</a> is now deprecated and
<a href="https://www.keycloak.org/2022/03/releases.html">will reach EOL with Keycloak 20</a>, the
<a href="https://github.com/keycloak/keycloak/tree/main/operator">new one</a> is already available as
a preview, see the <a href="https://www.keycloak.org/operator/installation">installation guide</a>.</p>
</div>
<div class="paragraph">
<p>One of the most common concerns around the new Operator is the current lack of the CRDs for managing Keycloak resources,
such as realm, users and clients, in a cloud-native way. One of the key aspects of the new Operator will be redesign
of managing these Keycloak resources via CRs and git-ops. This new approach will leverage
the <a href="https://www.keycloak.org/2022/07/storage-map.html">new storage architecture</a> and future immutability options,
making the CRs the declarative single source of truth. In comparison to the legacy Operator, this will bring high robustness,
reliability, and predictability to the whole solution.</p>
</div>
<div class="paragraph">
<p>Before we would consider operator ready for leveraging CRs, we expect completing several features including but not
limited to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>File store (expected in Keycloak 20) to persist data in a file instead of DB.</p>
</li>
<li>
<p>Read-only possibilities for administration REST API, UI Console and other interfaces. This is required for the new immutability concept
which will be used to ensure any data coming from the CRs (and subsequently from the file store) are read-only from
all interfaces.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of this is critical to proper CRs implementation, hence the new Operator is currently missing the CRDs for managing
Keycloak resources. The missing CRDs will be added once Keycloak has the necessary support for it, which is currently
expected in Keycloak 21.</p>
</div>
<div class="paragraph">
<p>We have prepared a few options to alleviate the situation with missing CRDs
in <a href="https://github.com/keycloak/keycloak-realm-operator">this repository</a>.</p>
</div></div>


<div class="container">
    <footer class="d-flex flex-wrap justify-content-between align-items-center pt-2 mt-3 mb-3">
        <div class="col-md-4 d-flex align-items-center">
            <span class="text-muted me-3">Sponsored by</span>
            <a href="http://www.redhat.com/" target="_blank" class="">
                <img alt="Red Hat" src="/resources/images/Logo-RedHat-A-Standard-RGB.svg" width="100">
            </a>
        </div>
    </footer>
</div>

</body>
</html>
