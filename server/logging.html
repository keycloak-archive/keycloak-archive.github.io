
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Configuring logging - Keycloak</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Keycloak is an open source identity and access management solution">
    <meta name="author" content="Keycloak Team">
    <meta name="keywords" content="sso,idm,openid connect,saml,kerberos,ldap">

    

    

    <link href="/resources/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/resources/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="/resources/css/keycloak.css" rel="stylesheet">

    <link rel="shortcut icon" href="/resources/favicon.ico">

    <script src="/resources/js/ga.js" type="text/javascript"></script>
    <script src="/resources/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/resources/tocbot/dist/tocbot.min.js" type="text/javascript"></script>
</head>
<body>

<header class="navbar navbar-expand-md bg-light shadow-sm">
<nav class="container-xxl flex-wrap flex-md-no-wrap navbar-light">
    <a class="navbar-brand me-5" href="/">
        <img class="img-fluid" src="/resources/images/keycloak_logo_200px.svg" width="240" alt="Keycloak"/>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="fa fa-bars fa-lg px-1 py-2"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav flex-row flex-wrap bd-navbar-nav pt-2 py-md-0">
        <li class="nav-item col-6 col-md-auto">
          <a class="nav-link " href="/guides">Guides</a>
        </li>
        <li class="nav-item col-6 col-md-auto">
          <a class="nav-link " href="/documentation">Docs</a>
        </li>
        <li class="nav-item col-6 col-md-auto">
          <a class="nav-link " href="/downloads">Downloads</a>
        </li>
        <li class="nav-item col-6 col-md-auto">
          <a class="nav-link " href="/community">Community</a>
        </li>
        <li class="nav-item col-6 col-md-auto">
          <a class="nav-link " href="/blog">Blog</a>
        </li>
      </ul>
    </div>
</nav>
</header>


<div class="container mt-5 kc-article">
    <div class="row">
        <div class="col-md-9 col-xl-10 col-sm-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/guides">Guides</a></li>
                    <li class="breadcrumb-item"><a href="/guides#server">Server</a></li>
                    <li class="breadcrumb-item active">Configuring logging</li>
                </ol>
            </nav>

            <div class="mb-4">
                <h1>Configuring logging</h1>
                    <span class="text-muted">Learn how to configure Logging</span>
            </div>



            <div class="kc-asciidoc" id="guide-body">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Keycloak uses the JBoss Logging framework. The following is a high-level overview for the available log handlers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>root</p>
<div class="ulist">
<ul>
<li>
<p>console (<em>default</em>)</p>
</li>
<li>
<p>file</p>
</li>
<li>
<p>GELF</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging_configuration">Logging configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Logging is done on a per-category basis in Keycloak. You can configure logging for the root log level or for more specific categories such as <code>org.hibernate</code> or <code>org.keycloak</code>. This guide describes how to configure logging.</p>
</div>
<div class="sect2">
<h3 id="_log_levels">Log levels</h3>
<div class="paragraph">
<p>The following table defines the available log levels.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FATAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Critical failures with complete inability to serve any kind of request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERROR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A significant error or problem leading to the inability to process requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WARN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A non-critical error or problem that might not require immediate correction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INFO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keycloak lifecycle events or important information. Low frequency.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEBUG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">More detailed information for debugging purposes, such as database logs. Higher frequency.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TRACE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Most detailed debugging information. Very high frequency.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ALL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Special level for all log messages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OFF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Special level to turn logging off entirely (not recommended).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_configuring_the_root_log_level">Configuring the root log level</h3>
<div class="paragraph">
<p>When no log level configuration exists for a more specific category logger, the enclosing category is used instead. When there is no enclosing category, the root logger level is used.</p>
</div>
<div class="paragraph">
<p>To set the root log level, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log-level=&lt;root-level&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use these guidelines for this command:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For <code><em>&lt;root-level&gt;</em></code>, supply a level defined in the preceding table.</p>
</li>
<li>
<p>The log level is case-insensitive. For example, you could either use <code>DEBUG</code> or <code>debug</code>.</p>
</li>
<li>
<p>If you were to accidentally set the log level twice, the last occurrence in the list becomes the log level. For example, if you included the syntax <code>--log-level="info,&#8230;&#8203;,DEBUG,&#8230;&#8203;"</code>, the root logger would be <code>DEBUG</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_category_specific_log_levels">Configuring category-specific log levels</h3>
<div class="paragraph">
<p>You can set different log levels for specific areas in Keycloak. Use this command to provide a comma-separated list of categories for which you want a different log level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log-level="&lt;root-level&gt;,&lt;org.category1&gt;:&lt;org.category1-level&gt;"</code></pre>
</div>
</div>
<div class="paragraph">
<p>A configuration that applies to a category also applies to its sub-categories unless you include a more specific matching sub-category.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log-level="INFO,org.hibernate:debug,org.hibernate.hql.internal.ast:info"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example sets the following log levels:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Root log level for all loggers is set to INFO.</p>
</li>
<li>
<p>The hibernate log level in general is set to debug.</p>
</li>
<li>
<p>To keep SQL abstract syntax trees from creating verbose log output, the specific subcategory <code>org.hibernate.hql.internal.ast</code> is set to info. As a result, the SQL abstract syntax trees are omitted instead of appearing at the <code>debug</code> level.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enabling_log_handlers">Enabling log handlers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To enable log handlers, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="&lt;handler1&gt;,&lt;handler2&gt;"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The available handlers are <code>console</code>, <code>file</code> and <code>gelf</code>. The more specific handler configuration mentioned below will only take effect when the handler is added to this comma-separated list.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_console_log_handler">Console log handler</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The console log handler is enabled by default, providing unstructured log messages for the console.</p>
</div>
<div class="sect2">
<h3 id="_configuring_the_console_log_format">Configuring the console log format</h3>
<div class="paragraph">
<p>Keycloak uses a pattern-based logging formatter that generates human-readable text logs by default.</p>
</div>
<div class="paragraph">
<p>The logging format template for these lines can be applied at the root level. The default format template is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The format string supports the symbols in the following table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Symbol</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders a simple % character.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%c</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the log category name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%d{xxx}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders a date with the given date format string.String syntax defined by <code>java.text.SimpleDateFormat</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%e</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exception</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders a thrown exception.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%h</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hostname</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the simple host name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%H</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Qualified host name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the fully qualified hostname, which may be the same as the simple host name, depending on the OS configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%i</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the current process PID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full Message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the log message and an exception, if thrown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Newline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the platform-specific line separator string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%N</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the name of the current process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%p</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the log level of the message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%r</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relative time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Render the time in milliseconds since the start of the application log.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simple message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders only the log message without exception trace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%t</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thread name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders the thread name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%t{id}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thread ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Render the thread ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%z{&lt;zone name&gt;}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timezone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the time zone of log output to &lt;zone name&gt;.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Line number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Render the line number of the log message.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_setting_the_logging_format">Setting the logging format</h3>
<div class="paragraph">
<p>To set the logging format for a logged line, perform these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build your desired format template using the preceding table.</p>
</li>
<li>
<p>Enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log-console-format="'&lt;format&gt;'"</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that you need to escape characters when invoking commands containing special shell characters such as <code>;</code> using the CLI. Therefore, consider setting it in the configuration file instead.</p>
</div>
<div class="listingblock">
<div class="title">Example: Abbreviate the fully qualified category name</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log-console-format="'%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n'"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example abbreviates the category name to three characters by setting <code>[%c{3.}]</code> in the template instead of the default <code>[%c]</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_json_or_plain_console_logging">Configuring JSON or plain console logging</h3>
<div class="paragraph">
<p>By default, the console log handler logs plain unstructured data to the console. To use structured JSON log output instead, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log-console-output=json</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Log Message</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{"timestamp":"2022-02-25T10:31:32.452+01:00","sequence":8442,"loggerClassName":"org.jboss.logging.Logger","loggerName":"io.quarkus","level":"INFO","message":"Keycloak 18.0.0-SNAPSHOT on JVM (powered by Quarkus 2.7.2.Final) started in 3.253s. Listening on: http://0.0.0.0:8080","threadName":"main","threadId":1,"mdc":{},"ndc":"","hostName":"host-name","processName":"QuarkusEntryPoint","processId":36946}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using JSON output, colors are disabled and the format settings set by <code>--log-console-format</code> will not apply.</p>
</div>
<div class="paragraph">
<p>To use unstructured logging, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log-console-output=default</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example Log Message:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">2022-03-02 10:36:50,603 INFO  [io.quarkus] (main) Keycloak 18.0.0-SNAPSHOT on JVM (powered by Quarkus 2.7.2.Final) started in 3.615s. Listening on: http://0.0.0.0:8080</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_colors">Colors</h3>
<div class="paragraph">
<p>Colored console log output for unstructured logs is disabled by default. Colors may improve readability, but they can cause problems when shipping logs to external log aggregation systems. To enable or disable color-coded console log output, enter following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log-console-color=&lt;false|true&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_file_logging">File logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As an alternative to logging to the console, you can use unstructured logging to a file.</p>
</div>
<div class="sect2">
<h3 id="_enable_file_logging">Enable file logging</h3>
<div class="paragraph">
<p>Logging to a file is disabled by default. To enable it, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,file"</code></pre>
</div>
</div>
<div class="paragraph">
<p>A log file named <code>keycloak.log</code> is created inside the <code>data/log</code> directory of your Keycloak installation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_location_and_name_of_the_log_file">Configuring the location and name of the log file</h3>
<div class="paragraph">
<p>To change where the log file is created and the file name, perform these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a writable directory to store the log file.</p>
<div class="paragraph">
<p>If the directory is not writable, Keycloak will start correctly, but it will issue an error and no log file will be created.</p>
</div>
</li>
<li>
<p>Enter this command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,file" --log-file=&lt;path-to&gt;/&lt;your-file.log&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_file_handler_format">Configuring the file handler format</h3>
<div class="paragraph">
<p>To configure a different logging format for the file log handler, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log-file-format="&lt;pattern&gt;"</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#_configuring_the_console_log_format">Configuring the console log format</a> for more information and a table of the available pattern configuration.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_centralized_logging_using_gelf">Centralized logging using GELF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Keycloak can send logs to a centralized log management system such as the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Graylog</p>
</li>
<li>
<p>Logstash, inside the Elasticsearch, Logstash, Kibana (ELK) logging stack</p>
</li>
<li>
<p>Fluentd, inside the Elasticsearch, Fluentd, Kibana (EFK) logging stack</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Keycloak uses the <a href="https://quarkus.io/guides/centralized-log-management">Quarkus Logging GELF</a> extension to support these environments.</p>
</div>
<div class="sect2">
<h3 id="_enabling_the_gelf_handler">Enabling the GELF handler</h3>
<div class="paragraph">
<p>To enable logging using GELF, add it to the list of activated log handlers.</p>
</div>
<div class="listingblock">
<div class="title">Example:</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,gelf"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_gelf_handler">Configuring the GELF handler</h3>
<div class="paragraph">
<p>To configure the Host and Port of your centralized logging system, enter the following command and substitute the values with your specific values:
.Host and port of the GELF server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,gelf" --log-gelf-host=myhost --log-gelf-port=12345</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the GELF handler is enabled, the host is using <code>localhost</code> as host value and UDP for communication. To use TCP instead of UDP, prefix the host value with <code>tcp:</code>. The Default port is <code>12201</code>.</p>
</div>
<div class="paragraph">
<div class="title">Include or exclude Stacktraces</div>
<p>Keycloak includes the complete Stacktrace inside the <code>StackTrace</code> field. To exclude this field, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,gelf" --log-gelf-include-stack-trace=false</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Configure the timestamp format</div>
<p>You can change the format of the <code>timestamp</code> field. For example, you can include the date and time down to seconds by entering the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,gelf" --log-gelf-timestamp-format="'yyyy-MM-dd HH:mm:ss'"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you could use the config file to avoid escaping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">log-gelf-timestamp-format=yyyy-MM-dd HH:mm:ss</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default timestamp format is <code>yyyy-MM-dd HH:mm:ss,SSS</code>. You can use the <a href="https://docs.oracle.com/javase/10/docs/api/java/text/SimpleDateFormat.html">available SimpleDateFormat patterns</a> to define an appropriate timestamp.</p>
</div>
<div class="paragraph">
<div class="title">Configure the facility</div>
<p>The <code>facility</code> field is an indicator of the process or program that is the source of log messages. The default value is <code>keycloak</code>. To set this field to your preferred identifier, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,gelf" --log-gelf-facility=MyKeycloak</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use the CLI to configure Keycloak and use whitespaces for <code>facility</code>, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,gelf" --log-gelf-facility="'my keycloak'"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you could use the config file to avoid escaping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">log-gelf-facility=my keycloak</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Configure the default message size</div>
<p>To change the default message size of 8kb (8192 bytes) of GELF log messages for Keycloak, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,gelf" --log-gelf-max-message-size=16384</code></pre>
</div>
</div>
<div class="paragraph">
<p>The maximum size of one GELF log message is set in Bytes. The preceding example increases the size to 16kb. When messages exceed the maximum size, GELF submits the message in multiple chunks.</p>
</div>
<div class="paragraph">
<div class="title">Configure sending of message parameters</div>
<p>Keycloak includes message parameters of the occurred log event. These fields appear in the output as <code>MessageParam0</code>, <code>MessageParam1</code>, and so on, depending on the parameter length.
To switch off this behavior, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,gelf" --log-gelf-include-message-parameters=false</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Configure sending of source code location</div>
<p>Keycloak includes the <code>SourceClassName</code>, <code>SourceMethodName</code> and <code>SourceSimpleClassName</code> fields in the GELF log messages. These fields provide detail on the location of an exception that occurred. To stop sending these fields, enter the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,gelf" --log-gelf-include-location=false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_send_logs_to_graylog">Example: Send logs to Graylog</h3>
<div class="paragraph">
<p>The following example shows how to send Keycloak logs to the Graylog centralized logging stack. This example assumes you have a container tool such as <a href="https://www.docker.com/">docker</a> installed to start the <code>compose.yml</code>.</p>
</div>
<div class="sect3">
<h4 id="_starting_the_graylog_stack">Starting the Graylog stack</h4>
<div class="paragraph">
<p>The composed stack consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Graylog</p>
</li>
<li>
<p>ElasticSearch</p>
</li>
<li>
<p>MongoDB</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">version: '3.8'

services:
  elasticsearch:
    image: docker.io/elastic/elasticsearch:7.10.2
    ports:
      - "9200:9200"
    environment:
      ES_JAVA_OPTS: "-Xms512m -Xmx512m"
      discovery.type: "single-node"
    networks:
      - graylog

  mongo:
    image: mongo:4.4
    networks:
      - graylog

  graylog:
    image: graylog/graylog:4.3.3
    ports:
      - "9000:9000"
      - "12201:12201/udp"
      - "1514:1514"
    environment:
      GRAYLOG_HTTP_EXTERNAL_URI: "http://127.0.0.1:9000/"
      # CHANGE ME (must be at least 16 characters)!
      GRAYLOG_PASSWORD_SECRET: "forpasswordencryption"
      # Password: admin
      GRAYLOG_ROOT_PASSWORD_SHA2: "8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918"
    networks:
      - graylog
    depends_on:
      - elasticsearch
      - mongo

networks:
  graylog:
    driver: bridge</code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy and save the example locally into a <code>compose.yml</code> file and enter this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">docker compose up -d</code></pre>
</div>
</div>
<div class="paragraph">
<p>After a few seconds, the Stack is ready to serve requests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_graylog_udp_input">Creating a Graylog UDP Input</h4>
<div class="paragraph">
<p>Once the stack is running, you need to create a UDP Input Graylog listens to. You can create it from the Graylog web UI (System → Input → Select GELF UDP) available at <a href="http://localhost:9000" class="bare">http://localhost:9000</a> or using the API:</p>
</div>
<div class="paragraph">
<p>This <code>curl</code> example creates a new GELF UDP Input using the API and the default Graylog login credentials (admin/admin).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -H "Content-Type: application/json" -H "Authorization: Basic YWRtaW46YWRtaW4=" -H "X-Requested-By: curl" -X POST -v -d \
'{"title":"udp input","configuration":{"recv_buffer_size":262144,"bind_address":"0.0.0.0","port":12201,"decompress_size_limit":8388608},"type":"org.graylog2.inputs.gelf.udp.GELFUDPInput","global":true}' \
http://localhost:9000/api/system/inputs</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the stack is still in the bootstrap phase, you receive a response containing <code>* Empty reply from server</code>. A successful response includes <code>HTTP/1.1 201 Created</code> to indicate that the UDP input is created.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configure_keycloak_to_send_logs_using_gelf">Configure Keycloak to send logs using GELF</h4>
<div class="paragraph">
<p>Keycloak needs to be configured to send logs using GELF. The appropriate configuration can be seen in the following keycloak.conf example. The example includes the <code>log-gelf-host</code> and <code>log-gelf-port</code> values. These are optional values that are included for illustration purposes; default values exist.</p>
</div>
<div class="listingblock">
<div class="title">Keycloak GELF Configuration</div>
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">log=console,gelf
log-gelf-host=localhost
log-gelf-port=12201</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graylog_see_the_results">Graylog: See the results</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open your web browser, go to <code><a href="http://localhost:9000" class="bare">http://localhost:9000</a></code>.</p>
</li>
<li>
<p>Log in to the Graylog web UI using the administrator credentials (admin/admin).</p>
</li>
<li>
<p>Go to Streams, All Messages.</p>
</li>
<li>
<p>Start updating the stream by pressing the Play button in the upper right corner.</p>
</li>
<li>
<p>Start Keycloak using <code>start</code> or <code>start-dev</code> and your GELF config.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After a few seconds, Keycloak messages appear in the Graylog dashboard.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_setup_using_the_elk_stack">Example Setup using the ELK Stack</h3>
<div class="paragraph">
<p>The following example shows how to send Keycloak logs to the ELK centralized logging stack. It assumes you have a container tool such as <a href="https://www.docker.com/">docker</a> installed to start the <code>compose.yml</code>.</p>
</div>
<div class="sect3">
<h4 id="_enable_the_logstash_gelf_plugin_and_create_a_pipeline">Enable the logstash GELF plugin and create a pipeline</h4>
<div class="paragraph">
<p>Logstash uses an input plugin that understands and parses the GELF format. To activate this plugin when you are starting the ELK stack later on, create a directory <code>pipelines</code> and a file <code>gelf.conf</code> located in this directory. Then create an empty <code>compose.yml</code> in the parent directory.</p>
</div>
<div class="listingblock">
<div class="title">File Structure:</div>
<div class="content">
<pre class="highlight"><code>/ELK
  - compose.yml
  - pipelines/
    - gelf.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add the following contents to <code>pipelines/gelf.conf</code> and save it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">input {
  gelf {
    port =&gt; 12201
  }
}
output {
  stdout {}
  elasticsearch {
    hosts =&gt; ["http://elasticsearch:9200"]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This file activates and configures the logstash GELF plugin and points it to the right elasticsearch instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_starting_the_elk_stack">Starting the ELK stack</h4>
<div class="paragraph">
<p>The composed stack consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ElasticSearch</p>
</li>
<li>
<p>Logstash</p>
</li>
<li>
<p>Kibana</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Copy the following content to your <code>compose.yml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"># Launch Elasticsearch
version: '3.8'

services:
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch-oss:6.8.2
    ports:
      - "9200:9200"
      - "9300:9300"
    environment:
      ES_JAVA_OPTS: "-Xms512m -Xmx512m"
    networks:
      - elk

  logstash:
    image: docker.elastic.co/logstash/logstash-oss:6.8.2
    volumes:
      - source: ./pipelines #the source dir gelf.conf resides
        target: /usr/share/logstash/pipeline
        type: bind
    ports:
      - "12201:12201/udp"
      - "5000:5000"
      - "9600:9600"
    networks:
      - elk
    depends_on:
      - elasticsearch

  kibana:
    image: docker.elastic.co/kibana/kibana-oss:6.8.2
    ports:
      - "5601:5601"
    networks:
      - elk
    depends_on:
      - elasticsearch

networks:
  elk:
    driver: bridge</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start the stack by entering the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">docker compose up -d</code></pre>
</div>
</div>
<div class="paragraph">
<p>After a few seconds the Stack should be ready to serve requests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_keycloak_to_send_logs_using_gelf">Configuring Keycloak to send logs using GELF</h4>
<div class="paragraph">
<p>Keycloak needs to be configured to send logs using GELF. The appropriate configuration can be seen in the following keycloak.conf example. This example includes the <code>log-gelf-host</code> and <code>log-gelf-port</code> values. These are optional values, which are included for illustration purposes; default values exist.</p>
</div>
<div class="listingblock">
<div class="title">Keycloak Gelf Configuration</div>
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">log=console,gelf
log-gelf-host=localhost
log-gelf-port=12201</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this configuration applied, start keycloak using <code>start-dev</code> or <code>start</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_kibana_see_the_results">Kibana: See the results</h4>
<div class="paragraph">
<p>Open <a href="http://localhost:5601" class="bare">http://localhost:5601</a> to reach the Kibana dashboard. The exact configuration of a good monitoring dashboard is out of scope for this guide. To find out if logs sent by Keycloak are delivered to Kibana, open the <a href="http://localhost:5601/app/kibana#/dev_tools/console?_g=()">Dev Tools</a> and execute the default <code>match_all</code> query. The logs should appear in the result field.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configure_a_different_log_level_for_the_gelf_logger">Configure a different log level for the GELF logger</h3>
<div class="paragraph">
<p>To keep log storage costs and verbosity low, it is often wanted to only store a subset of the verbose application logs inside a centralized log management system. To configure Keycloak to use a different log level for the logs you want to ingest, use the following configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">log=console,gelf
log-gelf-level=&lt;desired-log-level&gt;
...</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Example</div>
<p>To only see occurred log levels of warn and above in your centralized logging stack, but still see INFO level logs on the applications console logs, use the following configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">log=console,gelf
log-level=INFO
log-gelf-level=warn
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looking at your ingested logs, you will see only messages of level warn or above will appear.</p>
</div>
<div class="paragraph">
<p>Keep in mind that <code>--log-level</code> is setting the leading log level, so for example when you invoke the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">bin/kc.[sh|bat] start --log="console,gelf" --log-level=error --log-gelf-level=info</code></pre>
</div>
</div>
<div class="paragraph">
<p>nothing below the error level will be sent to your logging stack. That means that even GELF in this example will receive only error level log messages.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configure_additional_key_values">Configure additional key values</h3>
<div class="paragraph">
<p>Currently, the Keycloak configuration does not support partly dynamic configuration keys, as they are used in quarkus properties. For example, they are used when defining <code>quarkus.log.handler.gelf.additional-field.&lt;my-name&gt;.value</code>.</p>
</div>
<div class="paragraph">
<p>To add user-defined fields, you can provide these fields through a quarkus.properties file. See <a href="/server/configuration">Configuring Keycloak</a> and the <em>Using raw Quarkus properties</em> section.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_relevant_options">Relevant options</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch options">
<colgroup>
<col style="width: 75%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-console-color</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">Enable or disable colors when logging to console.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-console-color</code><br>
<strong>Env:</strong> <code>KC_LOG_CONSOLE_COLOR</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code>, <code>false</code> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-console-format</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">The format of unstructured console log entries.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><span class="options-description-extended">If the format has spaces in it, escape the value using "&lt;format&gt;".</span></p>
</div>
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-console-format</code><br>
<strong>Env:</strong> <code>KC_LOG_CONSOLE_FORMAT</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="options-default"><code>%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n</code></span> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-console-output</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">Set the log output to JSON or default (plain) unstructured logging.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-console-output</code><br>
<strong>Env:</strong> <code>KC_LOG_CONSOLE_OUTPUT</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>default</code> (default), <code>json</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-file</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">Set the log file path and filename.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-file</code><br>
<strong>Env:</strong> <code>KC_LOG_FILE</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="options-default"><code>data/log/keycloak.log</code></span> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-file-format</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">Set a format specific to file log entries.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-file-format</code><br>
<strong>Env:</strong> <code>KC_LOG_FILE_FORMAT</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="options-default"><code>%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n</code></span> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-file-output</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">Set the log output to JSON or default (plain) unstructured logging.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-file-output</code><br>
<strong>Env:</strong> <code>KC_LOG_FILE_OUTPUT</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>default</code> (default), <code>json</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-gelf-facility</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">The facility (name of the process) that sends the message.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-gelf-facility</code><br>
<strong>Env:</strong> <code>KC_LOG_GELF_FACILITY</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="options-default"><code>keycloak</code></span> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-gelf-host</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">Hostname of the Logstash or Graylog Host.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><span class="options-description-extended">By default UDP is used, prefix the host with <code>tcp:</code> to switch to TCP. Example: <code>tcp:localhost</code></span></p>
</div>
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-gelf-host</code><br>
<strong>Env:</strong> <code>KC_LOG_GELF_HOST</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="options-default"><code>localhost</code></span> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-gelf-include-location</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">Include source code location.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-gelf-include-location</code><br>
<strong>Env:</strong> <code>KC_LOG_GELF_INCLUDE_LOCATION</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code> (default), <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-gelf-include-message-parameters</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">Include message parameters from the log event.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-gelf-include-message-parameters</code><br>
<strong>Env:</strong> <code>KC_LOG_GELF_INCLUDE_MESSAGE_PARAMETERS</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code> (default), <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-gelf-include-stack-trace</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">If set to true, occuring stack traces are included in the <code>StackTrace</code> field in the GELF output.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-gelf-include-stack-trace</code><br>
<strong>Env:</strong> <code>KC_LOG_GELF_INCLUDE_STACK_TRACE</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code> (default), <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-gelf-level</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">The log level specifying which message levels will be logged by the GELF logger.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><span class="options-description-extended">Message levels lower than this value will be discarded.</span></p>
</div>
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-gelf-level</code><br>
<strong>Env:</strong> <code>KC_LOG_GELF_LEVEL</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="options-default"><code>INFO</code></span> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-gelf-max-message-size</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">Maximum message size (in bytes).</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><span class="options-description-extended">If the message size is exceeded, GELF will submit the message in multiple chunks.</span></p>
</div>
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-gelf-max-message-size</code><br>
<strong>Env:</strong> <code>KC_LOG_GELF_MAX_MESSAGE_SIZE</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="options-default"><code>8192</code></span> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-gelf-port</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">The port the Logstash or Graylog Host is called on.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-gelf-port</code><br>
<strong>Env:</strong> <code>KC_LOG_GELF_PORT</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="options-default"><code>12201</code></span> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-gelf-timestamp-format</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">Set the format for the GELF timestamp field.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><span class="options-description-extended">Uses Java SimpleDateFormat pattern.</span></p>
</div>
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-gelf-timestamp-format</code><br>
<strong>Env:</strong> <code>KC_LOG_GELF_TIMESTAMP_FORMAT</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="options-default"><code>yyyy-MM-dd HH:mm:ss,SSS</code></span> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="options-key"><code>log-level</code></span></p>
</div>
<div class="paragraph">
<p><span class="options-description">The log level of the root category or a comma-separated list of individual categories and their levels.</span></p>
</div>
<div class="openblock options-extended">
<div class="content">
<div class="paragraph">
<p><span class="options-description-extended">For the root category, you don&#8217;t need to specify a category.</span></p>
</div>
<div class="paragraph">
<p><strong>CLI:</strong> <code>--log-level</code><br>
<strong>Env:</strong> <code>KC_LOG_LEVEL</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="options-default"><code>info</code></span> (default)</p></td>
</tr>
</tbody>
</table>
</div>
</div>            </div>
        </div>

        <div class="col-md-3 mt-4 col-xl-2 col-sm-12 bg-light">
            <div class="sticky-top px-2 py-3">
                <div class="mt-2 mb-2 fw-bold">On this page</div>
                <div id="js-toc"></div>
                <div class="mt-4">
                    <a href="https://github.com/keycloak/keycloak/tree/main/docs/guides/server/logging.adoc" target="_blank"><i class="fa fa-edit"></i> Edit this guide</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/resources/js/guide.js" type="text/javascript"></script>


<div class="container">
    <footer class="d-flex flex-wrap justify-content-between align-items-center pt-2 mt-3 mb-3">
        <div class="col-md-4 d-flex align-items-center">
            <span class="text-muted me-3">Sponsored by</span>
            <a href="http://www.redhat.com/" target="_blank" class="">
                <img alt="Red Hat" src="/resources/images/Logo-RedHat-A-Standard-RGB.svg" width="100">
            </a>
        </div>
    </footer>
</div>

</body>
</html>
